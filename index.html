<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">  
    <title>2048: Audio Tuner</title>  
    <style>  
        :root {  
            --bg-color: #000000;  
            --grid-bg: #000000;  
            --cell-bg: #0d1117;  
            --text-main: #c9d1d9;  
            --accent: #00f2ff;  
            --glow: 0 0 15px var(--accent);  
        }  
  
        /* Visual Themes */  
        body.theme-cyber { --accent: #00f2ff; }  
        body.theme-retro { --accent: #8f7a66; }  
        body.theme-synth { --accent: #ff00ff; }  
        body.theme-forest { --accent: #7cfc00; }  
        body.theme-lava { --accent: #ff4500; }  
  
        /* --- NEON MODE STYLES --- */  
        body.mode-neon .grid-container {  
            border: 2px solid var(--accent);  
            box-shadow: var(--glow);  
            background: #000;  
        }  
        body.mode-neon .cell {  
            background: #0d1117;  
            border: 1px solid #222;  
        }  
        body.mode-neon .t2, body.mode-neon .t4 {  
            box-shadow: none; border: 1px solid var(--accent); color: var(--accent); text-shadow: var(--glow);  
        }  
        body.mode-neon .t8, body.mode-neon .t16, body.mode-neon .t32,   
        body.mode-neon .t64, body.mode-neon .t128, body.mode-neon .t256,   
        body.mode-neon .t512, body.mode-neon .t1024, body.mode-neon .t2048 {  
            box-shadow: 0 0 20px var(--accent), 0 0 5px #fff;  
            border: 1px solid #fff;  
            background: var(--accent);  
            color: #000;  
        }  
        /* Special Tile Styles */  
        body.mode-neon .t-joker { border: 2px dashed #ffea00; box-shadow: 0 0 10px #ffea00; }  
        body.mode-neon .t-stone { border: 2px solid #555; background: #222; color: #888; }  
  
        /* --- NORMAL MODE STYLES --- */  
        body.mode-normal {  
            --grid-bg: #161b22;   
            --cell-bg: #21262d;   
        }  
        body.mode-normal .grid-container {  
            background: var(--grid-bg);  
            border: 2px solid #30363d;  
            box-shadow: none;  
        }  
        body.mode-normal .cell {  
            background: var(--cell-bg);  
            border-radius: 6px;  
            color: #e6edf3;  
            border: none !important;  
            box-shadow: none !important;  
        }  
        body.mode-normal .t2, body.mode-normal .t4 {   
            background: var(--cell-bg); color: #e6edf3; border: 1px solid #30363d !important; text-shadow: none;   
        }  
        body.mode-normal .t8, body.mode-normal .t16, body.mode-normal .t32,   
        body.mode-normal .t64, body.mode-normal .t128, body.mode-normal .t256,   
        body.mode-normal .t512, body.mode-normal .t1024, body.mode-normal .t2048 {  
            background: var(--accent);  
            color: #000;  
            text-shadow: none;  
            font-weight: 800;  
        }  
        body.mode-normal .t-joker { background: #ffea00; color: #000; }  
        body.mode-normal .t-stone { background: #444; color: #fff; }  
  
        /* --- GLOBAL LAYOUT --- */  
        body {   
            background: #000; font-family: 'Segoe UI', sans-serif;   
            display: flex; flex-direction: column; align-items: center; justify-content: center;   
            height: 100vh; margin: 0; touch-action: none; color: var(--text-main); overflow: hidden;  
        }  
  
        .overlay {  
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;  
            background: rgba(0,0,0,0.95); display: flex; flex-direction: column;  
            align-items: center; justify-content: center; z-index: 100; backdrop-filter: blur(10px);  
        }  
        .card { text-align: center; padding: 25px; border-radius: 20px; border: 2px solid var(--accent); width: 300px; background: #000; position: relative; }  
        .hidden { display: none !important; }  
  
        .settings-box { margin: 15px 0; text-align: left; }  
        .settings-box label { display: block; font-size: 11px; margin-bottom: 5px; opacity: 0.8; letter-spacing: 1px; }  
        input[type="range"] { width: 100%; accent-color: var(--accent); cursor: pointer; }  
          
        .audio-list { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 10px; }  
        .audio-item {   
            background: #111; border: 1px solid #333; padding: 8px; border-radius: 6px;   
            font-size: 12px; cursor: pointer; transition: 0.2s; text-align: center;  
        }  
        .audio-item.active { background: var(--accent); color: #000; border-color: #fff; font-weight: bold; }  
  
        .mode-selector { display: flex; background: #111; border-radius: 8px; padding: 4px; margin-bottom: 15px; }  
        .mode-btn { flex: 1; padding: 8px; font-size: 11px; cursor: pointer; border-radius: 6px; border: none; background: transparent; color: #fff; }  
        .mode-btn.active { background: var(--accent); color: #000; font-weight: bold; }  
  
        .option-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px; background: #111; padding: 10px; border-radius: 8px; }  
        .toggle-switch { width: 40px; height: 20px; background: #333; border-radius: 20px; position: relative; cursor: pointer; transition: 0.3s; }  
        .toggle-switch.active { background: var(--accent); }  
        .toggle-switch::after { content: ''; position: absolute; top: 2px; left: 2px; width: 16px; height: 16px; background: #fff; border-radius: 50%; transition: 0.3s; }  
        .toggle-switch.active::after { left: 22px; }  
          
        .info-btn { width: 24px; height: 24px; border-radius: 50%; border: 1px solid var(--accent); color: var(--accent); background: transparent; font-weight: bold; font-size: 14px; cursor: pointer; display: flex; align-items: center; justify-content: center; margin-left: 10px; }  
  
        .theme-selector { display: flex; gap: 8px; margin-bottom: 15px; justify-content: center; }  
        .theme-dot { width: 25px; height: 25px; border-radius: 50%; cursor: pointer; border: 2px solid #fff3; transition: 0.2s; }  
        .theme-dot.active { border-color: #fff; transform: scale(1.15); }  
  
        .menu-btn { background: var(--accent); color: #000; border: none; padding: 12px 0; width: 100%; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 10px; }  
        .secondary-btn { background: transparent; border: 1px solid var(--accent); color: var(--accent); }  
  
        /* Game Header & Controls */  
        .header-stats { display: flex; gap: 6px; }  
        .stat-box { background: #000; padding: 5px 10px; border-radius: 6px; text-align: center; border: 1px solid var(--accent); min-width: 45px; }  
        .stat-label { font-size: 9px; opacity: 0.7; letter-spacing: 0.5px; }  
        .stat-val { font-weight: bold; font-size: 14px; }  
  
        .controls-container { width: 90vw; max-width: 400px; margin-bottom: 10px; display: flex; justify-content: space-between; height: 36px; }  
        .action-btn {   
            background: #111; border: 1px solid var(--accent); color: var(--accent);   
            padding: 5px 8px; border-radius: 6px; cursor: pointer; font-weight: bold;   
            display: flex; align-items: center; gap: 5px; transition: 0.2s; font-size: 11px;  
            flex: 1; margin: 0 2px; justify-content: center;  
        }  
        .action-btn.active-glow { background: var(--accent); color: #000; box-shadow: 0 0 10px var(--accent); }  
        .action-btn:disabled { opacity: 0.3; cursor: not-allowed; }  
  
        #game-container { width: 90vw; height: 90vw; max-width: 400px; max-height: 400px; border-radius: 12px; padding: 12px; box-sizing: border-box; position: relative; }  
        .grid { display: grid; grid-template-columns: repeat(4, 1fr); grid-gap: 10px; width: 100%; height: 100%; }  
        .cell { display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; position: relative; transition: transform 0.1s; }  
  
        .pop { animation: pop 0.1s ease; }  
        @keyframes pop { 0% { transform: scale(0.8); } 100% { transform: scale(1); } }  
          
        #rules-modal, #featured-rules-modal { z-index: 200; }  
        .rules-text { font-size: 13px; line-height: 1.4; text-align: left; opacity: 0.9; max-height: 60vh; overflow-y: auto; padding-right: 5px; }  
    </style>  
</head>  
<body class="theme-cyber mode-neon">   
  
    <div id="home-menu" class="overlay">  
        <div class="card">  
            <h1 style="color: var(--accent); font-size: 48px; margin: 0 0 10px 0;">2048</h1>  
            
            <label style="font-size: 11px; display: block; margin-bottom: 5px; text-align: left; opacity: 0.8; letter-spacing: 1px;">SELECT MODE</label>
            <div class="option-row">  
                <span style="font-size: 12px; font-weight: bold;">SURVIVAL MODE</span>  
                <div style="display:flex; align-items:center;">  
                    <div class="toggle-switch" id="survival-toggle" onclick="toggleSurvival()"></div>  
                    <button class="info-btn" onclick="showRules()">i</button>  
                </div>  
            </div>  
            <div class="option-row">  
                <span style="font-size: 12px; font-weight: bold;">FEATURED MODE</span>  
                <div style="display:flex; align-items:center;">  
                    <div class="toggle-switch" id="featured-toggle" onclick="toggleFeatured()"></div>  
                    <button class="info-btn" onclick="showFeaturedRules()">i</button>  
                </div>  
            </div>  

            <button class="menu-btn" onclick="startGame()">START GAME</button>  
            <button class="menu-btn secondary-btn" onclick="toggleSettings()">SETTINGS</button>  
        </div>  
    </div>  
  
    <div id="game-over" class="overlay hidden">  
        <div class="card">  
            <h1 style="color: #ff4500; font-size: 40px; margin: 0;">GAME OVER</h1>  
            <p id="final-score-text" style="margin-bottom: 20px; opacity: 0.8;">Score: 0</p>  
            <button class="menu-btn" onclick="startGame()">TRY AGAIN</button>  
            <button class="menu-btn secondary-btn" onclick="goHome()">MENU</button>  
        </div>  
    </div>  
  
    <div id="game-won" class="overlay hidden">  
        <div class="card" style="border-color: #ffd700;">  
            <h1 style="color: #ffd700; font-size: 32px; margin: 0;">CONGRATULATIONS!</h1>  
            <p style="margin-bottom: 20px; opacity: 0.8;">You have reached the end!</p>  
            <button class="menu-btn" onclick="startGame()">RESTART</button>  
            <button class="menu-btn secondary-btn" onclick="goHome()">MENU</button>  
        </div>  
    </div>  
  
    <div id="rules-modal" class="overlay hidden">  
        <div class="card" style="border-color: #fff;">  
            <h3 style="margin-top:0; color: #fff;">SURVIVAL RULES</h3>  
            <p class="rules-text">  
                ‚ö†Ô∏è <b>DANGER ZONE</b><br><br>  
                In Survival Mode, time is your enemy.<br><br>  
                1. If you do not make a move for <b>0.8 seconds</b>, a new tile will spawn automatically.<br>  
                2. This crowds the board faster.<br>  
                3. Keep moving to reset the timer!  
            </p>  
            <button class="menu-btn" style="background: #fff; color: #000;" onclick="closeRules()">GOT IT</button>  
        </div>  
    </div>  
  
    <div id="featured-rules-modal" class="overlay hidden">  
        <div class="card" style="border-color: var(--accent); width: 320px;">  
            <h3 style="margin-top:0; color: var(--accent);">FEATURED ABILITIES</h3>  
            <div class="rules-text">  
                üåü <b>SKILL SETS</b> (Earned every 600 pts)<br>  
                ‚Ü©Ô∏è <b>UNDO:</b> Restore previous board state.<br>  
                üîÄ <b>SHUFFLE:</b> Randomize tile positions.<br>  
                ‚ùÑÔ∏è <b>FREEZE:</b> Stop spawns for 3 moves.<br><br>  
                üé≠ <b>JOKER TILE:</b><br>  
                Spawns every 600 points. Acts as a wildcard! It merges with <b>any</b> number and doubles it.<br><br>  
                ü™® <b>STONE TILE:</b><br>  
                Spawns every 600 points. An obstacle that cannot be moved or merged. It disappears automatically after any <b>10 merges</b> occur on the board.  
            </div>  
            <button class="menu-btn" onclick="closeFeaturedRules()">GOT IT</button>  
        </div>  
    </div>  
  
    <div id="settings-menu" class="overlay hidden">  
        <div class="card">  
            <h3 style="margin-top:0; color: var(--accent);">SETTINGS</h3>  
            <div class="settings-box"><label>VOLUME</label><input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.5"></div>  
            <label style="font-size: 11px; display: block; margin-bottom: 5px; text-align: left; opacity: 0.8;">VISUAL STYLE</label>  
            <div class="mode-selector">  
                <button class="mode-btn active" id="btn-neon" onclick="setMode('neon')">NEON</button>  
                <button class="mode-btn" id="btn-normal" onclick="setMode('normal')">NORMAL</button>  
            </div>  
            
            <label style="font-size: 11px; display: block; margin-bottom: 8px; text-align: left; opacity: 0.8;">MUSIC PRESET</label>  
            <div class="audio-list" id="audio-presets">  
                <div class="audio-item" onclick="setAudioPreset('cyber')">Cyber</div>  
                <div class="audio-item" onclick="setAudioPreset('retro')">Retro</div>  
                <div class="audio-item active" onclick="setAudioPreset('synth')">Synth</div>  
                <div class="audio-item" onclick="setAudioPreset('forest')">Forest</div>  
                <div class="audio-item" onclick="setAudioPreset('lava')">Lava</div>  
            </div>  
            <label style="font-size: 11px; display: block; margin: 15px 0 8px; text-align: left; opacity: 0.8;">COLOUR THEME</label>  
            <div class="theme-selector">  
                <div class="theme-dot active" style="background:#00f2ff;" onclick="setTheme('cyber', this)"></div>  
                <div class="theme-dot" style="background:#8f7a66;" onclick="setTheme('retro', this)"></div>  
                <div class="theme-dot" style="background:#ff00ff;" onclick="setTheme('synth', this)"></div>  
                <div class="theme-dot" style="background:#7cfc00;" onclick="setTheme('forest', this)"></div>  
                <div class="theme-dot" style="background:#ff4500;" onclick="setTheme('lava', this)"></div>  
            </div>  
            <button class="menu-btn" onclick="toggleSettings()">BACK</button>  
        </div>  
    </div>  
  
    <div class="header" style="width: 90vw; max-width: 400px; margin-bottom: 5px;">  
        <div style="display: flex; justify-content: space-between; align-items: center;">  
            <button class="secondary-btn" style="padding: 6px 12px; border-radius: 6px; font-size: 12px; cursor: pointer;" onclick="goHome()">üè† MENU</button>  
            <div class="header-stats">  
                <div class="stat-box"><div class="stat-label">SCORE</div><span class="stat-val" id="score">0</span></div>  
                <div class="stat-box"><div class="stat-label">BEST</div><span class="stat-val" id="best">0</span></div>  
                <div class="stat-box"><div class="stat-label">MAX</div><span class="stat-val" id="max-tile">0</span></div>  
            </div>  
        </div>  
    </div>  
  
    <div id="featured-ui" class="controls-container hidden">  
        <button id="btn-undo" class="action-btn" onclick="activateUndo()">  
            ‚Ü©Ô∏è UNDO <span id="undo-count">(1)</span>  
        </button>  
        <button id="btn-shuffle" class="action-btn" onclick="activateShuffle()">  
            üîÄ SHUFFLE <span id="shuffle-count">(1)</span>  
        </button>  
        <button id="btn-freeze" class="action-btn" onclick="activateFreeze()">  
            ‚ùÑÔ∏è FREEZE <span id="freeze-count">(1)</span>  
        </button>  
    </div>  
  
    <div id="game-container" class="grid-container"><div class="grid" id="grid"></div></div>  

    <script src="logic.js"></script>  

</body>  
</html>